> è¿™ç¯‡å¯ä»¥è¯´æ˜¯å…¨ç½‘æŠŠç»„åˆé—®é¢˜å¦‚ä½•å»é‡ï¼Œè®²çš„æœ€æ¸…æ™°çš„äº†ï¼

# 40.ç»„åˆæ€»å’ŒII

é¢˜ç›®é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/combination-sum-ii/

ç»™å®šä¸€ä¸ªæ•°ç»„Â candidatesÂ å’Œä¸€ä¸ªç›®æ ‡æ•°Â targetÂ ï¼Œæ‰¾å‡ºÂ candidatesÂ ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸ºÂ targetÂ çš„ç»„åˆã€‚

candidatesÂ ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

è¯´æ˜ï¼š   
æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬ç›®æ ‡æ•°ï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚   
è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚Â   

ç¤ºä¾‹Â 1:   
è¾“å…¥: candidates =Â [10,1,2,7,6,1,5], target =Â 8,   
æ‰€æ±‚è§£é›†ä¸º:   
[   
  [1, 7],   
  [1, 2, 5],   
  [2, 6],   
  [1, 1, 6]    
]   
  
ç¤ºä¾‹Â 2:      
è¾“å…¥: candidates =Â [2,5,2,1,2], target =Â 5,    
æ‰€æ±‚è§£é›†ä¸º:   
[    
Â  [1,2,2],   
Â  [5]   
]   

# æ€è·¯

è¿™é“é¢˜ç›®å’Œ[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)å¦‚ä¸‹åŒºåˆ«ï¼š

1. æœ¬é¢˜candidatesÂ ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚
2. æœ¬é¢˜æ•°ç»„candidatesçš„å…ƒç´ æ˜¯æœ‰é‡å¤çš„ï¼Œè€Œ[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)æ˜¯æ— é‡å¤å…ƒç´ çš„æ•°ç»„candidates 

æœ€åæœ¬é¢˜å’Œ[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)è¦æ±‚ä¸€æ ·ï¼Œè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ 

**æœ¬é¢˜çš„éš¾ç‚¹åœ¨äºåŒºåˆ«2ä¸­ï¼šé›†åˆï¼ˆæ•°ç»„candidatesï¼‰æœ‰é‡å¤å…ƒç´ ï¼Œä½†è¿˜ä¸èƒ½æœ‰é‡å¤çš„ç»„åˆ**ã€‚

ä¸€äº›åŒå­¦å¯èƒ½æƒ³äº†ï¼šæˆ‘æŠŠæ‰€æœ‰ç»„åˆæ±‚å‡ºæ¥ï¼Œå†ç”¨setæˆ–è€…mapå»é‡ï¼Œè¿™ä¹ˆåšå¾ˆå®¹æ˜“è¶…æ—¶ï¼

æ‰€ä»¥è¦åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­å°±å»æ‰é‡å¤ç»„åˆã€‚ 

å¾ˆå¤šåŒå­¦åœ¨å»é‡çš„é—®é¢˜ä¸Šæƒ³ä¸æ˜ç™½ï¼Œå…¶å®å¾ˆå¤šé¢˜è§£ä¹Ÿæ²¡æœ‰è®²æ¸…æ¥šï¼Œåæ­£ä»£ç æ˜¯èƒ½è¿‡çš„ï¼Œæ„Ÿè§‰æ˜¯é‚£ä¹ˆå›äº‹ï¼Œç¨€é‡Œç³Šæ¶‚çš„å…ˆæŠŠé¢˜ç›®è¿‡äº†ã€‚

è¿™ä¸ªå»é‡ä¸ºä»€ä¹ˆå¾ˆéš¾ç†è§£å‘¢ï¼Œ**æ‰€è°“å»é‡ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨è¿‡çš„å…ƒç´ ä¸èƒ½é‡å¤é€‰å–ã€‚** è¿™ä¹ˆä¸€è¯´å¥½åƒå¾ˆç®€å•ï¼

éƒ½çŸ¥é“ç»„åˆé—®é¢˜å¯ä»¥æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„ï¼Œé‚£ä¹ˆâ€œä½¿ç”¨è¿‡â€åœ¨è¿™ä¸ªæ ‘å½¢ç»“æ„ä¸Šæ˜¯æœ‰ä¸¤ä¸ªç»´åº¦çš„ï¼Œä¸€ä¸ªç»´åº¦æ˜¯åŒä¸€æ ‘æä¸Šä½¿ç”¨è¿‡ï¼Œä¸€ä¸ªç»´åº¦æ˜¯åŒä¸€æ ‘å±‚ä¸Šä½¿ç”¨è¿‡ã€‚**æ²¡æœ‰ç†è§£è¿™ä¸¤ä¸ªå±‚é¢ä¸Šçš„â€œä½¿ç”¨è¿‡â€ æ˜¯é€ æˆå¤§å®¶æ²¡æœ‰å½»åº•ç†è§£å»é‡çš„æ ¹æœ¬åŸå› ã€‚**

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æ˜¯è¦åŒä¸€æ ‘å±‚ä¸Šä½¿ç”¨è¿‡ï¼Œè¿˜æ˜¯ç»Ÿä¸€æ ‘æä¸Šä½¿ç”¨è¿‡å‘¢ï¼Ÿ

å›çœ‹ä¸€ä¸‹é¢˜ç›®ï¼Œå…ƒç´ åœ¨åŒä¸€ä¸ªç»„åˆå†…æ˜¯å¯ä»¥é‡å¤çš„ï¼Œæ€ä¹ˆé‡å¤éƒ½æ²¡äº‹ï¼Œä½†ä¸¤ä¸ªç»„åˆä¸èƒ½ç›¸åŒã€‚


**æ‰€ä»¥æˆ‘ä»¬è¦å»é‡çš„æ˜¯åŒä¸€æ ‘å±‚ä¸Šçš„â€œä½¿ç”¨è¿‡â€ï¼ŒåŒä¸€æ ‘æä¸Šçš„éƒ½æ˜¯ä¸€ä¸ªç»„åˆé‡Œçš„å…ƒç´ ï¼Œä¸ç”¨å»é‡**ã€‚

ä¸ºäº†ç†è§£å»é‡æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œcandidates = [1, 1, 2], target = 3ï¼Œï¼ˆæ–¹ä¾¿èµ·è§candidateså·²ç»æ’åºäº†ï¼‰

**å¼ºè°ƒä¸€ä¸‹ï¼Œæ ‘å±‚å»é‡çš„è¯ï¼Œéœ€è¦å¯¹æ•°ç»„æ’åºï¼**

é€‰æ‹©è¿‡ç¨‹æ ‘å½¢ç»“æ„å¦‚å›¾æ‰€ç¤ºï¼š

![40.ç»„åˆæ€»å’ŒII](https://img-blog.csdnimg.cn/20201123202736384.png)

å¯ä»¥çœ‹åˆ°å›¾ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç›¸å¯¹äº [39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)æˆ‘å¤šåŠ äº†usedæ•°ç»„ï¼Œè¿™ä¸ªusedæ•°ç»„ä¸‹é¢ä¼šé‡ç‚¹ä»‹ç»ã€‚

## å›æº¯ä¸‰éƒ¨æ›² 

* **é€’å½’å‡½æ•°å‚æ•°** 

ä¸[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)å¥—è·¯ç›¸åŒï¼Œæ­¤é¢˜è¿˜éœ€è¦åŠ ä¸€ä¸ªboolå‹æ•°ç»„usedï¼Œç”¨æ¥è®°å½•åŒä¸€æ ‘æä¸Šçš„å…ƒç´ æ˜¯å¦ä½¿ç”¨è¿‡ã€‚ 

è¿™ä¸ªé›†åˆå»é‡çš„é‡ä»»å°±æ˜¯usedæ¥å®Œæˆçš„ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
vector<vector<int>> result; // å­˜æ”¾ç»„åˆé›†åˆ
vector<int> path;           // ç¬¦åˆæ¡ä»¶çš„ç»„åˆ
void backtracking(vector<int>& candidates, int target, int sum, int startIndex, vector<bool>& used) {
```

* **é€’å½’ç»ˆæ­¢æ¡ä»¶**

ä¸[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)ç›¸åŒï¼Œç»ˆæ­¢æ¡ä»¶ä¸º `sum > target` å’Œ `sum == target`ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
if (sum > target) { // è¿™ä¸ªæ¡ä»¶å…¶å®å¯ä»¥çœç•¥ 
    return;
}
if (sum == target) {
    result.push_back(path);
    return;
}
```

`sum > target`  è¿™ä¸ªæ¡ä»¶å…¶å®å¯ä»¥çœç•¥ï¼Œå› ä¸ºå’Œåœ¨é€’å½’å•å±‚éå†çš„æ—¶å€™ï¼Œä¼šæœ‰å‰ªæçš„æ“ä½œï¼Œä¸‹é¢ä¼šä»‹ç»åˆ°ã€‚

* **å•å±‚æœç´¢çš„é€»è¾‘**

è¿™é‡Œä¸[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)æœ€å¤§çš„ä¸åŒå°±æ˜¯è¦å»é‡äº†ã€‚

å‰é¢æˆ‘ä»¬æåˆ°ï¼šè¦å»é‡çš„æ˜¯â€œåŒä¸€æ ‘å±‚ä¸Šçš„ä½¿ç”¨è¿‡â€ï¼Œå¦‚æœåˆ¤æ–­åŒä¸€æ ‘å±‚ä¸Šå…ƒç´ ï¼ˆç›¸åŒçš„å…ƒç´ ï¼‰æ˜¯å¦ä½¿ç”¨è¿‡äº†å‘¢ã€‚

**å¦‚æœ`candidates[i] == candidates[i - 1]` å¹¶ä¸” `used[i - 1] == false`ï¼Œå°±è¯´æ˜ï¼šå‰ä¸€ä¸ªæ ‘æï¼Œä½¿ç”¨äº†candidates[i - 1]ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡candidates[i - 1]**ã€‚

æ­¤æ—¶forå¾ªç¯é‡Œå°±åº”è¯¥åšcontinueçš„æ“ä½œã€‚

è¿™å—æ¯”è¾ƒæŠ½è±¡ï¼Œå¦‚å›¾ï¼š

![40.ç»„åˆæ€»å’ŒII1](https://img-blog.csdnimg.cn/20201123202817973.png)

æˆ‘åœ¨å›¾ä¸­å°†usedçš„å˜åŒ–ç”¨æ©˜é»„è‰²æ ‡æ³¨ä¸Šï¼Œå¯ä»¥çœ‹å‡ºåœ¨candidates[i] == candidates[i - 1]ç›¸åŒçš„æƒ…å†µä¸‹ï¼š

* used[i - 1] == trueï¼Œè¯´æ˜åŒä¸€æ ‘æ”¯candidates[i - 1]ä½¿ç”¨è¿‡ 
* used[i - 1] == falseï¼Œè¯´æ˜åŒä¸€æ ‘å±‚candidates[i - 1]ä½¿ç”¨è¿‡

**è¿™å—å»é‡çš„é€»è¾‘å¾ˆæŠ½è±¡ï¼Œç½‘ä¸Šæœçš„é¢˜è§£åŸºæœ¬æ²¡æœ‰èƒ½è®²æ¸…æ¥šçš„ï¼Œå¦‚æœå¤§å®¶ä¹‹å‰æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜æˆ–è€…åˆ·è¿‡è¿™é“é¢˜ç›®ï¼Œçœ‹åˆ°è¿™é‡Œä¸€å®šä¼šæ„Ÿè§‰é€šé€äº†å¾ˆå¤šï¼**

é‚£ä¹ˆå•å±‚æœç´¢çš„é€»è¾‘ä»£ç å¦‚ä¸‹ï¼š

```
for (int i = startIndex; i < candidates.size() && sum + candidates[i] <= target; i++) {
    // used[i - 1] == trueï¼Œè¯´æ˜åŒä¸€æ ‘æ”¯candidates[i - 1]ä½¿ç”¨è¿‡
    // used[i - 1] == falseï¼Œè¯´æ˜åŒä¸€æ ‘å±‚candidates[i - 1]ä½¿ç”¨è¿‡
    // è¦å¯¹åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡çš„å…ƒç´ è¿›è¡Œè·³è¿‡
    if (i > 0 && candidates[i] == candidates[i - 1] && used[i - 1] == false) {
        continue;
    }
    sum += candidates[i];
    path.push_back(candidates[i]);
    used[i] = true;
    backtracking(candidates, target, sum, i + 1, used); // å’Œ39.ç»„åˆæ€»å’Œçš„åŒºåˆ«1ï¼šè¿™é‡Œæ˜¯i+1ï¼Œæ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡
    used[i] = false;
    sum -= candidates[i];
    path.pop_back();
}
```

**æ³¨æ„sum + candidates[i] <= targetä¸ºå‰ªææ“ä½œï¼Œåœ¨[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)æœ‰è®²è§£è¿‡ï¼**

## C++ä»£ç 

å›æº¯ä¸‰éƒ¨æ›²åˆ†æå®Œäº†ï¼Œæ•´ä½“C++ä»£ç å¦‚ä¸‹ï¼š

```
class Solution {
private:
    vector<vector<int>> result;
    vector<int> path;
    void backtracking(vector<int>& candidates, int target, int sum, int startIndex, vector<bool>& used) {
        if (sum == target) {
            result.push_back(path);
            return;
        }
        for (int i = startIndex; i < candidates.size() && sum + candidates[i] <= target; i++) {
            // used[i - 1] == trueï¼Œè¯´æ˜åŒä¸€æ ‘æ”¯candidates[i - 1]ä½¿ç”¨è¿‡
            // used[i - 1] == falseï¼Œè¯´æ˜åŒä¸€æ ‘å±‚candidates[i - 1]ä½¿ç”¨è¿‡
            // è¦å¯¹åŒä¸€æ ‘å±‚ä½¿ç”¨è¿‡çš„å…ƒç´ è¿›è¡Œè·³è¿‡
            if (i > 0 && candidates[i] == candidates[i - 1] && used[i - 1] == false) {
                continue;
            }
            sum += candidates[i];
            path.push_back(candidates[i]);
            used[i] = true;
            backtracking(candidates, target, sum, i + 1, used); // å’Œ39.ç»„åˆæ€»å’Œçš„åŒºåˆ«1ï¼Œè¿™é‡Œæ˜¯i+1ï¼Œæ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡
            used[i] = false;
            sum -= candidates[i];
            path.pop_back();
        }
    }

public:
    vector<vector<int>> combinationSum2(vector<int>& candidates, int target) {
        vector<bool> used(candidates.size(), false);
        path.clear();
        result.clear();
        // é¦–å…ˆæŠŠç»™candidatesæ’åºï¼Œè®©å…¶ç›¸åŒçš„å…ƒç´ éƒ½æŒ¨åœ¨ä¸€èµ·ã€‚
        sort(candidates.begin(), candidates.end());
        backtracking(candidates, target, 0, 0, used);
        return result;
    }
};

```

# æ€»ç»“

æœ¬é¢˜åŒæ ·æ˜¯æ±‚ç»„åˆæ€»å’Œï¼Œä½†å°±æ˜¯å› ä¸ºå…¶æ•°ç»„candidatesæœ‰é‡å¤å…ƒç´ ï¼Œè€Œè¦æ±‚ä¸èƒ½æœ‰é‡å¤çš„ç»„åˆï¼Œæ‰€ä»¥ç›¸å¯¹äº[39.ç»„åˆæ€»å’Œ](https://mp.weixin.qq.com/s/FLg8G6EjVcxBjwCbzpACPw)éš¾åº¦æå‡äº†ä¸å°‘ã€‚

**å…³é”®æ˜¯å»é‡çš„é€»è¾‘ï¼Œä»£ç å¾ˆç®€å•ï¼Œç½‘ä¸Šä¸€æœä¸€å¤§æŠŠï¼Œä½†å‡ ä¹æ²¡æœ‰èƒ½æŠŠè¿™å—ä»£ç å«ä¹‰è®²æ˜ç™½çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯ç»™å‡ºä»£ç ï¼Œç„¶åè¯´è¿™å°±æ˜¯å»é‡äº†ï¼Œç©¶ç«Ÿæ€ä¹ˆä¸ªå»é‡æ³•ä¹Ÿæ˜¯æ¨¡æ£±ä¸¤å¯**ã€‚

æ‰€ä»¥Carlæœ‰å¿…è¦æŠŠå»é‡çš„è¿™å—å½»å½»åº•åº•çš„ç»™å¤§å®¶è®²æ¸…æ¥šï¼Œ**å°±è¿â€œæ ‘å±‚å»é‡â€å’Œâ€œæ ‘æå»é‡â€éƒ½æ˜¯æˆ‘è‡ªåˆ›çš„è¯æ±‡ï¼Œå¸Œæœ›å¯¹å¤§å®¶ç†è§£æœ‰å¸®åŠ©ï¼**

**å°±é…±ï¼Œå¦‚æœæ„Ÿè§‰ã€Œä»£ç éšæƒ³å½•ã€è¯šæ„æ»¡æ»¡ï¼Œå°±å¸®Carlå®£ä¼ ä¸€æ³¢å§ï¼Œæ„Ÿè°¢å•¦ï¼**

> **æˆ‘æ˜¯[ç¨‹åºå‘˜Carl](https://github.com/youngyangyang04)ï¼Œå¯ä»¥æ‰¾æˆ‘[ç»„é˜Ÿåˆ·é¢˜](https://img-blog.csdnimg.cn/20201115103410182.png)ï¼Œä¹Ÿå¯ä»¥åœ¨[Bç«™ä¸Šæ‰¾åˆ°æˆ‘](https://space.bilibili.com/525438321)ï¼Œæœ¬æ–‡[leetcodeåˆ·é¢˜æ”»ç•¥](https://github.com/youngyangyang04/leetcode-master)å·²æ”¶å½•ï¼Œæ›´å¤š[ç²¾å½©ç®—æ³•æ–‡ç« ](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUxNjY5NTYxNA==&action=getalbum&album_id=1485825793120387074&scene=173#wechat_redirect)å°½åœ¨å…¬ä¼—å·ï¼š[ä»£ç éšæƒ³å½•](https://img-blog.csdnimg.cn/20200815195519696.png)ï¼Œå…³æ³¨åå°±ä¼šå‘ç°å’Œã€Œä»£ç éšæƒ³å½•ã€ç›¸è§æ¨æ™šï¼**

**å¦‚æœæ„Ÿè§‰å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦åå•¬ç»™ä¸€ä¸ªğŸ‘å§ï¼**

